直接上代码：<br>

- **准备训练数据**
```
API_SECRET_KEY = "你的智增增获取的api_key";
BASE_URL = "http://flag.smarttrot.com/index.php/api/v1"; #智增增的base_url

# files
def files():
    openai.api_key = API_SECRET_KEY
    openai.api_base = BASE_URL
    resp = openai.File.create(
        file=open("mydata.jsonl", "rb"),
        purpose='fine-tune'
    )
    json_str = json.dumps(resp, ensure_ascii=False)
    print(json_str)
```
- **上传训练数据**
```
API_SECRET_KEY = "你的智增增获取的api_key";
BASE_URL = "http://flag.smarttrot.com/index.php/api/v1"; #智增增的base_url

# jobs
def jobs(file_id):
    openai.api_key = API_SECRET_KEY
    openai.api_base = BASE_URL
    resp = openai.FineTuningJob.create(training_file=file_id, model="gpt-3.5-turbo")   #训练文件的id要从上一步获取得到
    json_str = json.dumps(resp, ensure_ascii=False)
    print(json_str)
```
- **检查是否训练完成**
```
API_SECRET_KEY = "你的智增增获取的api_key";
BASE_URL = "http://flag.smarttrot.com/index.php/api/v1"; #智增增的base_url

# retrieve
def retrieve(ftid):
    openai.api_key = API_SECRET_KEY
    openai.api_base = BASE_URL
    resp = openai.FineTuningJob.retrieve(ftid)    #微调任务id要从上一步获取得到
    json_str = json.dumps(resp, ensure_ascii=False)
    print(json_str)
```
- **使用微调模型**
```
API_SECRET_KEY = "你的智增增获取的api_key";
BASE_URL = "http://flag.smarttrot.com/index.php/api/v1"; #智增增的base_url

# chat
def chat_completions(query):
    openai.api_key = API_SECRET_KEY
    openai.api_base = BASE_URL
    resp = openai.ChatCompletion.create(
        model="ft:gpt-3.5-turbo-0613xxxxxxxxxxxxxxxxxxx",   # 模型名字要从上一步获取得到
        messages=[
            {"role": "system", "content": "You are a helpful assistant."},
            {"role": "user", "content": query}
        ]
    )
    json_str = json.dumps(resp, ensure_ascii=False)
    print(json_str)
```
